<div class="container-fluid">

  <app-film-search (filterChange)="filterOnTitre($event)" (realChange)="filterOnRealisateur($event)"
    (anneeChange)="filterOnAnnee($event)" (acteurChange)="filterOnActeur($event)"
    (rippedChange)="filterOnRipped($event)" (genreChange)="filterOnGenre($event)" (vuChange)="filterOnVu($event)">
  </app-film-search>

  <div class="row">
    <div class="col-lg-6 offset-lg-4" *ngIf="filteredFilms">
      <button type="button" class="btn btn-primary" (click)="resetFilter()">Effecer les filtres</button>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-2" *ngIf="filteredFilms">
      <a routerLink="" (click)="sort('titre')">Trier par Titre</a>
    </div>
    <div class="col-lg-2" *ngIf="filteredFilms">
      <a routerLink="" (click)="sort('daterip')">Trier par Date de RIP</a>
    </div>
    <div class="col-lg-2" *ngIf="filteredFilms">
      <a routerLink="" (click)="sort('dvdformat')">Trier par Format</a>
    </div>
    <div class="col-lg-2" *ngIf="filteredFilms">
      <a routerLink="" (click)="sort('duree')">Trier par Durée (min)</a>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12" *ngIf="filteredFilms">
      <h3>Liste des Films </h3>
    </div>

    <div class="col-lg-8 offset-lg-4" *ngIf="!filteredFilms">
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
      <div class="spinner-grow text-muted" *ngIf="loading"></div>
    </div>
  </div>
  <div class="row" *ngIf="filteredFilms">
    <div class="col-lg-12">Nombre de films : {{filteredFilms.length}}</div>
  </div>
  <div class="row">
    <div class="column card" *ngFor="let film of filteredFilms">
      <div class="container-fluid">
        <div class="row">
          <div class="column card info-poster">
            <a routerLink="/filmDetail/{{film.id}}">
              <img src="{{film.posterPath}}" alt="" width="300" />
            </a>
          </div>
          <div class="column card info-details">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-12">
                  {{film.annee}}
                </div>
                <div class="col-sm-12">
                  Durée : {{film.runtime}}
                </div>
                <div class="col-sm-12" *ngIf="film.dvd">
                  {{film.dvd.format}}
                </div>
                <div class="col-sm-12" *ngIf="film.dvd">Rippé :
                  <span *ngIf="film.dvd.ripped">
                    <img src="assets/img/ok.png" class="img ripped">
                  </span>
                  <span *ngIf="!film.dvd.ripped">
                    <img src="assets/img/ko.png" class="img ripped">
                  </span>
                </div>
                <div class="col-sm-12">Vu :
                  <span *ngIf="film.vu">
                    <img src="assets/img/ok.png" class="img ripped">
                  </span>
                  <span *ngIf="!film.vu">
                    <img src="assets/img/ko.png" class="img ripped">
                  </span>
                </div>
                <div class="col-sm-12" *ngIf="film.dvd && film.dvd.dateRip">Rippé le :
                  <span>
                    {{film.dvd.dateRip | date:'dd/MM/yy'}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>